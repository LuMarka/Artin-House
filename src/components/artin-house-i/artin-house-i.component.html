<div class="apartment-page">
  <app-header></app-header>
  
  <main class="apartment-page__main">
    <!-- Hero Section -->
    <section class="apartment-hero">
      <div class="apartment-hero__container">
        <button class="apartment-hero__back-btn" (click)="goToHome()">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m15 18-6-6 6-6"/>
          </svg>
          Volver al Inicio
        </button>
        <h1 class="apartment-hero__title">{{ apartmentTitle }}</h1>
        <p class="apartment-hero__description">{{ apartmentDescription }}</p>
        <div class="apartment-hero__features">
          <div class="apartment-hero__feature">
            <strong>Capacidad:</strong> 4 huéspedes
          </div>
          <div class="apartment-hero__feature">
            <strong>Habitaciones:</strong> 2 Dormitorios, 1 Baño
          </div>
        </div>
      </div>
    </section>

    <!-- Gallery Section -->
    <section class="apartment-gallery">
      <div class="apartment-gallery__container">
        <h2 class="apartment-gallery__title">Galería de {{ apartmentTitle }}</h2>
        <div class="apartment-gallery__grid">
          @for (image of images(); track image.src; let i = $index) {
            <div class="apartment-gallery__item" 
                 [class]="'apartment-gallery__item apartment-gallery__item--' + image.size"
                 (click)="openModal(image)">
              <img 
                [src]="image.src" 
                [alt]="image.alt" 
                class="apartment-gallery__image" 
                loading="lazy" />
            </div>
          }
        </div>
      </div>
    </section>

    <!-- Amenities Section -->
    <section class="apartment-amenities">
      <div class="apartment-amenities__container">
        <h2 class="apartment-amenities__title">Comodidades y Servicios</h2>
        <div class="apartment-amenities__grid">
          @for (amenity of amenities; track amenity.name) {
            <div class="apartment-amenities__item">
              <div class="apartment-amenities__icon-wrapper">
                <img [src]="amenity.icon" [alt]="amenity.name" class="apartment-amenities__icon" />
              </div>
              <span class="apartment-amenities__name">{{ amenity.name }}</span>
            </div>
          }
        </div>
      </div>
    </section>

    <!-- Booking Section -->
    <app-booking></app-booking>

    <!-- Contact Button -->
    <section class="apartment-contact">
      <div class="apartment-contact__container">
        <h2 class="apartment-contact__title">¿Necesitas más información?</h2>
        <button class="apartment-contact__btn" (click)="goToContact()">
          Contáctanos
        </button>
      </div>
    </section>
  </main>

  <app-footer></app-footer>
  <app-whatsapp-button></app-whatsapp-button>

  <!-- Modal -->
  @if (isModalOpen()) {
    <div class="apartment-gallery__modal" (click)="onBackdropClick($event)">
      <div class="apartment-gallery__modal-content">
        <button class="apartment-gallery__modal-close" (click)="closeModal()" aria-label="Cerrar modal">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
        @if (selectedImage()) {
          <img 
            [src]="selectedImage()!.src" 
            [alt]="selectedImage()!.alt" 
            class="apartment-gallery__modal-image" />
        }
      </div>
    </div>
  }
</div>